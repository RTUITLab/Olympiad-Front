<div class="text" *ngIf="challenge; else loading">
    <div *ngIf="isAdmin() || isResultsViewer()" style="border:1px solid grey;">
        <button *ngIf="isAdmin()" (click)="editChallenge()">Изменить</button>
        <p *ngIf="isAdmin()">Дата создания: {{prettyTime(challenge.CreationTime)}}</p>
        <p *ngIf="!dump; else dumpTable">Нет дампа</p>
        <ng-template #dumpTable>
            <button (click)="downloadSolutions()">Скачать лучшие решения</button>
            <br>
            <label>
                Внутренние коды
                <input type="radio" name="statusPick" value="allNumbers" [(ngModel)]="statusMode" />
            </label>
            <label>
                Изображения
                <input type="radio" name="statusPick" value="allPics" [(ngModel)]="statusMode" />
            </label>
            <label>
                Очки
                <input type="radio" name="statusPick" value="scores" [(ngModel)]="statusMode" />
            </label>
            <table>
                <tr>
                    <th>User ID</th>
                    <th *ngFor="let exerciseName of exerciseNames">
                        {{exerciseName}}
                    </th>
                </tr>
                <tr *ngFor="let user of userIds()">
                    <td>{{user}}
                        <p *ngIf="isAdmin()" (click)="recheckSolutions(user)">recheck</p>
                        <p *ngIf="isAdmin()" (click)="deleteUser(user)">delete</p>
                    </td>
                    <td *ngFor="let exerciseName of exerciseNames" [ngSwitch]="statusMode">
                        <p *ngSwitchCase="'allNumbers'">
                            {{solutionStatus(user, exerciseName)}}
                        </p>
                        <div *ngSwitchCase="'allPics'">
                            <div *ngIf="solutionStatus(user, exerciseName)!==-1">

                                <img (click)="showLogs(user, exerciseName)" class="statusIcon" src="assets/StatusCode/{{solutionStatus(user, exerciseName)}}.svg" /> {{solutionId(user, exerciseName)}}
                            </div>
                        </div>
                        <p *ngSwitchCase="'scores'">
                            {{score(user, exerciseName)}}
                        </p>
                        <p *ngSwitchDefault>
                            ERROR
                        </p>
                    </td>
                </tr>
            </table>
        </ng-template>
    </div>
    <div class="challenge-info">
        <h1>{{challenge.Name}}</h1>
        <p>{{challengeTime(challenge)}}</p>
    </div>
</div>
<ng-template #loading>
    Загрузка...
</ng-template>